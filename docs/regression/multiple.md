

## 다중회귀분석


그러면 여기서 당연히 나오는 의문이 그러면은 연식도 중요하고 주행거리도 중요한데 두 가지를 같이 넣고 분석을 할 수는 없을까요? 이런 게 의문이 들죠.

```python
ols('price ~ mileage + year', df).fit().summary()
```

이렇게 물결 표시 `~` 오른쪽에 `mileage + year` 이렇게 쓰시면 이 얘기는 뭐냐면 중고차 가격은 주행거리 `mileage` 랑 연식 `year` 두 가지에 의해서 영향을 받아 가지고 가격이 결정된다, 이런 얘기에요.

그럼 그렇게 분석을 하면 어떻게 되냐

분석을 하시면 아까 연식만 가지고 분석했을 때는 정확도가 얼마였죠?

68.7%였는데 이 두 가지를 같이 통합적으로 분석하면은 74.9% 거의 75%가 설명이 되는 그러니까 어떤 중고차 가격에 굉장히 많은 부분이죠. 75%는 이 두 가지 변수로 다 할 수 있는 거예요. 연식하고 주행거리. 그게 75%고 나머지가 한 25% 있겠죠. 옵션이라든가 색깔이라든가 이런 게 있는데 제일 큰 변수는 소형차 같은 아반떼 케이스 이런 착덕을 기준으로 하면 연식이랑 주행거리가 사실 거의 깡패라는 걸 알 수 있습니다. 굉장히 중요한 변수죠.

그래서 여러분들이 중고차 가격을 생각하시면 중고차를 좋게 좋은 가격에 팔고 싶다. 그러면 일단은 빨리 파셔야 되고 연식이 조금이라서 새 차일 때 그다음에 조금 타신 그런 차를 파셔야 된다. 반대로 하면은 차를 살 때 좀 차를 싸게 하고 싶다. 그러면 연식도 좀 오래되고 주행거리도 긴 차를 사시면 되겠죠. 

당연한 얘기지만 그걸 이제 통계적으로 분석할 수 있고 더 중요한 거는 여기 기울기입니다.

주행거리는 만 키로 오만 키로 십만 키로 이렇게 갈수록 더 헌차입니다. 많이 뛰면 주행거리가 길면 헌차죠. 그래서 가격이 이렇게 떨어집니다. 기울기가 마이너스가 되고요. 기울기를 보시면 `mileage`가 -0.0023이라는 거는 1km 갈 때마다 23원씩 가격이 떨어진다는 거고 

연식은 2000년 2010년 2020년 이렇게 뒤로 갈수록 이쪽으로 갈수록 새 차거든요. 그래서 뒤로 갈수록 가격이 이렇게 올라갑니다. 그래서 기울기가 플러스고 그 다음에연식 `yaer`는 1년마다 84만원 차이가 난다는 거예요.


## 통계적 통제


그러면 어? 아까랑 얘기가 다르네. 아까랑 1km당 52원 차이 나고 1년당 160만원 차이 난다고 했는데 이게 숫자가 조금씩 작아졌죠. 왜 그렇게 되느냐 하면은 이제 통계적 통제라는 건데 보통 차들이 연식이 오래된 차는 주행거리도 길어요. 주행거리가 긴 차는 연식도 오래됐죠. 그 두 가지가 섞여 있어요.

그래서 우리가 분석을 할 때 여기 앞에처럼 연식만 가지고 분석을 하면 사실 그 연식이란 변수 안에 주행거리가 숨어져 있거든요.

그래서 이 160만원이라는 거는 순수하게 차가 오래돼서 그냥 구형이라 가지고 차값이 싼 것도 있지만 보통 연식이 오래된 차는 연식만 오래돼서 싼 게 아니라 주행거리도 길어서 싼 게 있습니다. 그게 섞여가지고 합쳐서 160만원으로 판정이 되는 거예요.

근데 우리가 이거를 따로따로 넣고 분석을 하면은 연식에 의한 부분하고 순수하게 연식에 의한 부분하고 주행거리에 의한 부분하고 따로따로 떨어져서 나오게 됩니다. 그래서 이 기울기가 조금씩 다르게 판정이 되는 거죠.

그래서 이런 식으로 되는 거를 우리가 통계적으로 통제한다고 얘기를 합니다.

통계적으로 통제한다는 말이 뜻이 무슨 뜻이냐면 우리가 예를 들면 무거운 물체랑 가벼운 물체를 낙하 실험을 해요. 이걸 두 개를 떨어뜨려 가지고 동시에 떨어지는지 속도가 다른지를 보고 싶다. 문제가 뭐냐면 얘네가 무게도 다르지만 보통 크기가 다르니까 공기저항 받는 게 다르단 말이에요. 과학 실험을 할 때 어떻게 하냐면 공기저항을 배제를 하기 위해서 진공 상태로 만들어서 진공에 상태로 떨어뜨린 거든요. 그러면 공기저항을 배제하고 무게가 얼마나 영향을 미치는지를 알 수 있겠죠. 이런 식으로 하는 거를 실험적 통제라고 해요.

실험 상황에서 우리가 개입하는 변수를 배제를 하는 거예요.

근데 중고차 가격 같은 경우는 실험적 통제가 어렵습니다. 똑같은 차 두 대를 하나는 만 키로 뛰고 하나는 안 뛰는 다음에 중고차 시장이 내놔서 팔 수는 없죠. 해볼 수는 있는데 그렇게 하기가 어려워요.

그래서 통계적 통제는 뭐냐면 우리가 분석에다가 두 가지 변수를 같이 넣는 거예요. 그래서 84만 원 차이라는 건 뭐냐면 만약에 이론적으로 주행거리가 갔다면 연식 1년당 84만 원만큼 차이 난다. 똑같이 만 키로 뛰는 차 두 대가 있으면 얘네가 연식이 딱 1년 차이 난다. 그럼 가격이 84만 원 차이 날 거다.

이런 얘기고 주행거리에 이 -0.0023은 무슨 얘기이냐면 만약에 연식이 똑같은 차가 있는데 하나는 만 키로 뛰었고 하나는 0키로 떴다. 그러면 가격이 만 키로 뛰는 차이만큼 23만 원만큼 차이가 날 거다.

그래서 이 때 기울기는 이 주행거리의 기울기는 연식을 통제한 통계적으로 통제한 상태에서 차이고 이 연식에서 84만 원이라는 거는 주행거리가 똑같다고 치면 곧대에 84만 원 만큼 차이가 난다. 이런 얘기가 됩니다.

그래서 우리 회귀 분석에서 이런 식으로 변수를 넣으면 마치 우리가 울리 실험 같은 거 할 때 진공 상태로 만들듯이 그런 거를 직접적으로 할 수 없는 경우에도 통계적으로 통제를 해서 만들어낼 수가 있는 거죠.

## 회귀분석의 필요성

물론 경험이 많으면 머릿속에 나름대로 산식과 우리의 감으로 대량 이런 산식이 숫자로 딱 말할 순 없지만 대량 있어요. 그래서 경험이 많은 사람은 굳이 이런 걸 산식을 안 내봐도 알 수 있는데 문제는 경험이라는 건 어떤 개인 수많은 개인의 노하우잖아요. 회사 입장에서는 이제 개인의 노하우로만 있으면 이게 조직의 노하우로 만들기가 어렵죠.

그 다음에 또 하나는 또 이 경험이라는 게 또 사람과 다르기 때문에 어떤 사람은 아 이 차는 한 1500만 원이면 될 것 같은데 하는데 어떤 딜러는 아 이 정도는 계속 1800만 원에 팔 수 있어요. 의견이 다를 때가 있단 말이에요. 그러면 이제 통계적 분석을 하면 아 우리가 이 정도 가격이 되겠구나 이게 서로 공유할 수 있는 그런 근거가 된 거죠.
