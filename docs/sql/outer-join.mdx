# OUTER JOIN

## LEFT OUTER JOIN (왼쪽 외부 조인)

*   **`LEFT OUTER JOIN` (또는 `LEFT JOIN`)**:
*   왼쪽(먼저 명시된) 테이블의 모든 행을 결과에 포함.
*   오른쪽 테이블에서는 조인 조건에 일치하는 행의 데이터를 가져옴.
*   오른쪽 테이블에 일치하는 데이터가 없으면 해당 컬럼들은 `NULL` 값으로 표시.
*   **문법**:

```sql
SELECT table1.column1, table2.column1
FROM table1 -- 왼쪽 테이블
LEFT OUTER JOIN table2 ON table1.join_column = table2.join_column; -- 오른쪽 테이블
```

*   `OUTER` 키워드는 생략 가능.

## LEFT OUTER JOIN (왼쪽 외부 조인)

*   **예시**: 모든 `TB_COMPANY_MASTER` (기업정보)를 조회하되, 각 기업의 `TB_LOAN_ACCOUNT` (여신정보)가 있다면 함께 표시 (여신이 없는 기업도 결과에 포함, 여신 관련 컬럼은 `NULL`).

```sql
SELECT
    c.COMPANY_NM AS "회사명",
    l.LOAN_ACCT_NO AS "여신계좌번호",
    l.LOAN_AMT AS "여신금액"
FROM
    TB_COMPANY_MASTER c
LEFT JOIN
    TB_LOAN_ACCOUNT l ON c.BIZ_REG_NO = l.BIZ_REG_NO
ORDER BY
    c.COMPANY_NM;
```

## RIGHT OUTER JOIN (오른쪽 외부 조인)

*   **`RIGHT OUTER JOIN` (또는 `RIGHT JOIN`)**:
*   오른쪽(두 번째 명시된) 테이블의 모든 행을 결과에 포함.
*   왼쪽 테이블에서는 조인 조건에 일치하는 행의 데이터를 가져옴.
*   왼쪽 테이블에 일치하는 데이터가 없으면 해당 컬럼들은 `NULL` 값으로 표시.
*   **문법**:

```sql
SELECT table1.column1, table2.column1
FROM table1 -- 왼쪽 테이블
RIGHT OUTER JOIN table2 ON table1.join_column = table2.join_column; -- 오른쪽 테이블
```

*   `OUTER` 키워드는 생략 가능.

## RIGHT OUTER JOIN (오른쪽 외부 조인)

*   **예시**: 모든 `TB_LOAN_ACCOUNT` (여신정보)를 조회하되, 각 여신에 해당하는 `TB_COMPANY_MASTER` (기업정보)를 함께 표시 (매칭되는 기업 정보가 없는 여신이 있다면(데이터 이상), 기업 관련 컬럼은 `NULL`).
*   (일반적으로 `LEFT JOIN`을 더 선호하며, 테이블 순서를 바꿔 `LEFT JOIN`으로 표현 가능)

```sql
SELECT
    c.COMPANY_NM AS "회사명",
    l.LOAN_ACCT_NO AS "여신계좌번호",
    l.LOAN_AMT AS "여신금액"
FROM
    TB_COMPANY_MASTER c
RIGHT JOIN
    TB_LOAN_ACCOUNT l ON c.BIZ_REG_NO = l.BIZ_REG_NO
ORDER BY
    l.LOAN_ACCT_NO;
```

## FULL OUTER JOIN (완전 외부 조인)

*   **`FULL OUTER JOIN` (또는 `FULL JOIN`)**:
*   양쪽 테이블의 모든 행을 결과에 포함.
*   조인 조건에 일치하는 데이터가 있으면 해당 값을, 없으면 `NULL` 값으로 표시.
*   즉, 왼쪽 테이블에는 있지만 오른쪽에는 없는 행, 오른쪽 테이블에는 있지만 왼쪽에는 없는 행, 양쪽 모두에 있는 행을 모두 보여줌.
*   **문법**:

```sql
SELECT table1.column1, table2.column1
FROM table1
FULL OUTER JOIN table2 ON table1.join_column = table2.join_column;
```

*   `OUTER` 키워드는 생략 가능.

## FULL OUTER JOIN (완전 외부 조인)

*   **예시**: `TB_COMPANY_MASTER`와 `TB_LOAN_ACCOUNT` 간의 관계에서, 기업 정보만 있거나, 여신 정보만 있거나, 둘 다 있는 모든 경우를 조회.

```sql
SELECT
    c.COMPANY_NM AS "회사명",
    l.LOAN_ACCT_NO AS "여신계좌번호"
FROM
    TB_COMPANY_MASTER c
FULL JOIN
    TB_LOAN_ACCOUNT l ON c.BIZ_REG_NO = l.BIZ_REG_NO
ORDER BY
    c.COMPANY_NM, l.LOAN_ACCT_NO;
```

*   **활용**: 두 데이터셋 간의 불일치 항목을 찾거나, 양쪽 데이터를 모두 유지하면서 비교 분석할 때 유용.

## JOIN과 집합 연산자 비교

*   **목표의 차이**:
    *   **조인 (`JOIN`)**: 여러 테이블의 컬럼들을 옆으로 합쳐서 연관된 데이터를 하나의 행으로 만듦.
        *   데이터를 '넓게' 확장
    *   **집합 연산자**: 두 개 이상의 `SELECT` 문의 행들을 위아래로 합치거나 비교
        *   데이터를 '길게' 확장하거나 비교
*   **사용 시점**:
    *   **조인**: 서로 다른 정보를 가진 테이블들에서 관련 있는 데이터를 연결하여 한 번에 보고 싶을 때.
        *   예: 기업명(기업테이블)과 그 기업의 매출액(재무테이블)을 함께 조회.
    *   **집합 연산자**: 유사한 구조의 데이터셋을 합치거나, 두 데이터셋 간의 공통/차이점을 찾고 싶을 때.
        *   예: 서울 지점 고객 목록과 부산 지점 고객 목록을 합쳐 전체 고객 목록 생성 (`UNION ALL`).
        *   예: 작년 우수 고객 목록과 올해 우수 고객 목록에서 변동 없는 고객 찾기 (`INTERSECT`).
*   **컬럼 처리**:
    *   **조인**: 결과에 양쪽 테이블의 컬럼들이 모두 (또는 선택적으로) 포함될 수 있음.
    *   **집합 연산자**: 참여하는 `SELECT` 문의 컬럼 개수와 데이터 타입이 일치해야 하며, 결과 컬럼은 첫 번째 `SELECT`문을 따름.

## 퀴즈

import { QuizComponent } from "@/components/QuizComponent";

<QuizComponent quizId="outer-join" quizItems={
    [
  {
    "item_type": "radio",
    "question": "TB_COMPANY_MASTER 테이블에 있는 기업 중에서 여신 정보(TB_CREDIT_INFO)가 없는 기업까지 모두 포함하여 기업 목록을 조회하고 싶을 때, 가장 적절한 조인 방법은 무엇인가요?",
    "options": [
      "INNER JOIN",
      "LEFT OUTER JOIN",
      "FULL OUTER JOIN"
    ],
    "hint": "기준이 되는 테이블(TB_COMPANY_MASTER)의 모든 행을 표시하고, 다른 테이블(TB_CREDIT_INFO)은 일치하는 경우에만 데이터를 표시해야 합니다.",
    "solution": "LEFT OUTER JOIN"
  },
  {
    "item_type": "radio",
    "question": "조인(JOIN)과 집합 연산자(UNION, INTERSECT 등)의 가장 큰 차이점은 무엇인가요?",
    "options": [
      "조인은 2개의 테이블만 가능하지만, 집합 연산자는 3개 이상도 가능하다.",
      "조인은 데이터를 옆(컬럼)으로 확장하고, 집합 연산자는 데이터를 위아래(행)로 확장하거나 비교한다.",
      "조인은 성능이 항상 빠르고, 집합 연산자는 항상 느리다.",
      "조인은 SELECT 문 내에서만 사용되고, 집합 연산자는 CREATE 문에서도 사용된다."
    ],
    "hint": "데이터가 결합되는 방향(열 추가 vs 행 추가)을 생각해보세요.",
    "solution": "조인은 데이터를 옆(컬럼)으로 확장하고, 집합 연산자는 데이터를 위아래(행)로 확장하거나 비교한다."
  },
  {
    "item_type": "long",
    "question": "TB_COMPANY_MASTER에 TB_CREDIT_INFO를 JOIN 했을 때 해당되는 TB_CREDIT_INFO가 없는 회사(CREDIT_INFO_ID가 NULL인 경우)를 찾는 SQL 문을 작성해보세요",
    "options": [],
    "hint": "LEFT OUTER JOIN을 사용하여 TB_COMPANY_MASTER를 기준으로 조인한 뒤, WHERE 절에서 TB_CREDIT_INFO 테이블의 기본 키(또는 NOT NULL 컬럼)가 NULL인 조건을 찾습니다.",
    "solution": "SELECT * FROM TB_COMPANY_MASTER m LEFT OUTER JOIN TB_CREDIT_INFO c ON m.BIZ_REG_NO = c.BIZ_REG_NO WHERE c.CREDIT_INFO_ID IS NULL;"
  },
  {
    "item_type": "number",
    "question": "앞의 질의의 실행 결과는 총 개수는 몇 개인가요?",
    "options": [],
    "hint": "실제 데이터베이스에서 쿼리를 실행하여 결과를 확인해야 합니다.",
    "solution": 1
  }
]
} />


## Q&A
<iframe src="https://tally.so/embed/wbOOKg?alignLeft=1&hideTitle=1&transparentBackground=1&dynamicHeight=0" loading="lazy" width="100%" height="274" frameborder="0" marginheight="0" marginwidth="0" title="Q&A"></iframe>