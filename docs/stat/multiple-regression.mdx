# 다중 회귀분석


## 다중 회귀분석 (Multiple Regression)

*   **독립변수가 2개 이상**인 회귀분석.
*   **Python 관계식:** `+` 기호로 독립변수 구분/추가.
    ```
    price ~ mileage + year
    ```
    *   `mileage`와 `year` 둘 다를 독립변수로 사용.

## 통계적 통제 (Statistical Control)

*   **필요성:** 독립변수 `x` 외에 종속변수 `y` 및 `x` 와 모두 관련된 **혼란변수(confounder) `z`** 존재 시, `x`의 순수 영향력 파악 어려움 (`z` 영향이 `x` 효과에 섞여 반영).
*   **실험적 통제:** 실험 설계 통해 `z` 값 일정하게 유지하여 영향 제거.
*   **통계적 통제:** `z`를 회귀 모형에 **독립변수로 함께 포함**. → `x`의 회귀계수($w_x$)에서 `z`의 간접 영향 분리/제거 효과. `x`의 **고유한 영향력** 추정 가능.

## 표준화 (Standardization) in Multiple Regression

*   **필요성:** 다중회귀분석에서 독립변수들 **단위 다르면**, 회귀계수 크기만으로 **영향력 직접 비교 어려움**.
*   **표준화:** 각 변수를 (값 - 평균) / 표준편차 로 변환 (Z-점수).
$$ 
Z = \frac{X - \mu}{\sigma} 
$$
*   **효과:** 표준화된 변수는 평균=0, 표준편차=1 됨. **단위 제거**되어 계수 크기로 **상대적 영향력 비교 가능**해짐.

## 관계식에서 표준화하기 (Python)

*   `statsmodels` 관계식 내 `scale()` 함수 사용 가능.
    ```python
    # mileage와 year를 각각 표준화하여 독립변수로 사용
    ols("price ~ scale(mileage) + scale(year)", data=df).fit()
    ```
*   **주의:** **범주형** 독립변수는 표준화하지 않음.


## 퀴즈

import { QuizComponent } from "@/components/QuizComponent";

<QuizComponent quizId="multiple-regression" quizItems={[
    {
        "item_type": "radio",
        "question": "다중 회귀분석이 단순 선형 회귀분석과 구별되는 가장 큰 특징은 무엇인가요?",
        "options": [
            "사용하는 종속변수의 유형이 다르다.",
            "모형에 포함되는 독립변수의 개수가 2개 이상이다.",
            "최소제곱법(OLS) 대신 다른 추정 방법을 사용한다.",
            "모형에 절편(intercept) 항이 반드시 포함되지 않는다."
        ],
        "hint": "다중 회귀분석은 독립변수가 2개 이상인 회귀분석입니다.",
        "solution": "모형에 포함되는 독립변수의 개수가 2개 이상이다."
    },
    {
        "item_type": "radio",
        "question": "다중 회귀분석에서 특정 독립변수 X의 '순수한' 영향력을 파악하기 위해, X와 종속변수 Y 모두에 영향을 줄 수 있는 다른 변수 Z를 회귀 모형에 함께 포함시키는 것을 무엇이라고 하나요?",
        "options": [
            "표준화",
            "더미 코딩",
            "통계적 통제",
            "변수 선택"
        ],
        "hint": "Z를 실험적으로 일정하게 고정하는 것은 실험적 통제라고 합니다.",
        "solution": "통계적 통제"
    },
    {
        "item_type": "radio",
        "question": "다중 회귀분석에서 서로 단위가 다른 연속형 독립변수들(예: 주행거리(km)와 연식(year))의 상대적인 영향력을 비교하고자 할 때 가장 적절한 방법은 무엇인가요?",
        "options": [
            "각 변수의 p-value 크기를 비교한다.",
            "각 변수를 표준화(Z-점수 변환)한 후 회귀계수의 크기를 비교한다.",
            "각 변수의 원 회귀계수의 크기를 직접 비교한다.",
            "결정계수(R-squared) 값을 확인한다.",
        ],
        "hint": "표준화를 하면 단위가 제거되어 계수 크기로 영향력 비교가 가능합니다.",
        "solution": "각 변수를 표준화(Z-점수 변환)한 후 회귀계수의 크기를 비교한다."
    },
    {
        "item_type": "radio",
        "question": "iqsize.xlsx에서 변수 PIQ는 동작성 지능, Brain은 두뇌의 크기, Height는 키(inch), Weight는 몸무게(pound)를 나타냅니다.\n\n동작성 지능을 종속 변수로, 두뇌의 크기와 몸무게, 키를 독립변수로 다중회귀분석을 하려면 관계식을 어떻게 세워야 합니까?",
        "options": [
            "PIQ ~ Brain + Height + Weight",
            "Brain + Height + Weight ~ PIQ"
        ],
        "hint": "종속 변수가 `~`의 앞에 옵니다",
        "solution": "PIQ ~ Brain + Height + Weight"
    },
    {
        "item_type": "number",
        "question": "위의 모형으로 회귀분석 했을 때 Brain의 계수는 얼마입니까? (소수점 둘째자리까지)",
        "hint": "```\nimport pandas as pd\nfrom statsmodels.formula.api import ols\niq = pd.read_excel(\'iqsize.xlsx\')\nols(\'PIQ ~ Brain + Height + Weight\', data=iq).fit().summary()\n```",
        tolerance: 0.01,
        "solution": 2.0604
    },
    {
        "item_type": "radio",
        "question": "Brain의 계수의 p-value를 해석해보세요 (유의수준 5%)",
        "options": [
            "Brain은 PIQ에 통계적으로 유의한 영향이 있다",
            "Brain은 PIQ에 통계적으로 유의한 영향이 없다"
        ],
        "hint": "통계적으로 유의하려면 p-value가 0.05보다 작아야 합니다",
        "solution": "Brain은 PIQ에 통계적으로 유의한 영향이 있다",
    },
    {
        "item_type": "number",
        "question": "Height의 계수는 얼마입니까? (소수점 둘째자리까지)",
        "options": [],
        "hint": "```\nimport pandas as pd\nfrom statsmodels.formula.api import ols\niq = pd.read_excel(\'iqsize.xlsx\')\nols(\'PIQ ~ Brain + Height + Weight\', data=iq).fit().summary()\n```",
        "tolerance": 0.01,
        "solution": -2.7319
    },
    {
        "item_type": "radio",
        "question": "Height의 계수의 p-value를 해석해보세요",
        "options": [
            "Height는 PIQ에 통계적으로 유의한 영향이 있다",
            "Height는 PIQ에 통계적으로 유의한 영향이 없다"
        ],
        "hint": "통계적으로 유의하려면 p-value가 0.05보다 작아야 합니다",
        "solution": "Height는 PIQ에 통계적으로 유의한 영향이 있다",
    },
    {
        "item_type": "number",
        "question": "Weight의 계수는 얼마입니까?",
        "options": [],
        "hint": "```\nimport pandas as pd\nfrom statsmodels.formula.api import ols\niq = pd.read_excel(\'iqsize.xlsx\')\nols(\'PIQ ~ Brain + Height + Weight\', data=iq).fit().summary()\n```",
        "tolerance": 0.01,
        "solution": 0.0006
    },
    {
        "item_type": "radio",
        "question": "Weight의 계수의 p-value를 해석해보세요",
        "options": [
            "Weight는 PIQ에 통계적으로 유의한 영향이 있다",
            "Weight는 PIQ에 통계적으로 유의한 영향이 없다"
        ],
        "hint": "통계적으로 유의하려면 p-value가 0.05보다 작아야 합니다",
        "solution": "Weight는 PIQ에 통계적으로 유의한 영향이 없다"
    },
    {
        "item_type": "radio",
        "question": "Brain, Height, Weight를 표준화해서 회귀분석해보세요. PIQ에 가장 많은 영향을 미치는 변수는 무엇입니까?",
        "options": [
            "Brain",
            "Height",
            "Weight"
        ],
        "hint": "```\nols(\'PIQ ~ scale(Brain) + scale(Height) + scale(Weight)\', data=iq).fit().summary()\n```",
        "solution": "Brain"
    }
]} />

## Q&A
<iframe src="https://tally.so/embed/wbOOKg?alignLeft=1&hideTitle=1&transparentBackground=1&dynamicHeight=0" loading="lazy" width="100%" height="274" frameborder="0" marginheight="0" marginwidth="0" title="Q&A"></iframe>
