# 기술 통계와 탐색적 데이터 분석

## 데이터를 표로 정리하기

*   **행 (row):**
    *   표에서 **가로** 방향 한 줄.
    *   하나의 **사례(case)** 또는 관측치(observation) 해당.
*   **열 (column):**
    *   표에서 **세로** 방향 한 줄.
    *   하나의 **변수(variable)** 또는 특성(feature) 해당.

|       | 열 (column) | 변수 (variable) |
| :---- | :---------- | :-------------- |
| **행**  |             |                 |
| **row** |             |                 |
| **사례** |             |                 |

## 변수의 종류

*   **범주형 변수 (Categorical Variable):** 종류, 이름, 그룹 등 해당.
    *   숫자로 표시되어도 양적 개념 아님 (예: 성별 1=남, 2=여).
    *   덧셈 등 대부분 산술 연산 의미 없음.
    *   순서 있을 수 있으나 (예: 학력), 간격 일정하지 않음.
    *   **예:** 주거 형태, 고향, 학력, 출석 여부, 혈액형.
*   **연속형 변수 (Continuous Variable):** 연속적 수치. 양적 의미 가짐.
    *   간격 일정하고 덧셈, 뺄셈 등 계산 의미 있음.
    *   **예:** 무게, 나이, 시간, 거리, 자녀 수, 시험 점수, 가격.

## 기술 통계 (Descriptive Statistics)

*   데이터를 **묘사, 설명, 요약**하는 통계.
*   **[참고] 추론 통계 (Inferential Statistics):** 데이터를 바탕으로 더 큰 집단(모집단)에 대해 추론, 예측.
*   **주요 측정치:**
    *   **중심 경향치 (Central Tendency):** 데이터가 어디에 몰려있는가? (평균, 중간값, 최빈값)
    *   **분위수 (Quantile):** 데이터에서 각 값의 상대적 순위/위치? (사분위수, 백분위수)
    *   **변산성 측정치 (Measure of Variability/Dispersion):** 데이터가 얼마나 퍼져있는가? (범위, IQR, 분산, 표준편차)

## 중심 경향치: 평균 (Mean)

*   N개 값의 합계를 N으로 나눈 것 (산술 평균).
*   **단점:** 극단값(outlier)에 영향 크게 받음.
    *   10, 20, 30, 40, 50 → 평균 30
    *   10, 20, 30, 40, 500 → 평균 120 (극단값 500 때문에 크게 증가)
*   **[참고] 1986년 UNC 졸업생 초봉 조사:**
    *   가장 높은 학과: 지리학과 (약 25만 달러)
    *   당시 미국 대졸 평균 초봉: 약 2만 2천 달러
    *   이유: 당시 졸업생 중 마이클 조던(지리학과) 포함. 극단값 영향.
*   **Average vs. Mean:**
    *   한국어: 둘 다 "평균".
    *   통계: `mean` 사용 정확.
    *   `mean`: 산술/기하/조화 평균 등 포함. 특별 언급 없으면 **산술 평균**.
    *   `average`: 일상적 표현. 보통 산술 평균 의미.


## 중심 경향치: 중간값 (Median)

*   값들을 크기 순 정렬 시 **가운데 위치**한 값.
*   **장점:** 극단값 영향 받지 않음.
    *   10, 20, 30, 40, 50 → 중간값 30
    *   10, 20, 30, 40, 500 → 중간값 30
*   "중위수" 라고도 함 (예: 중위소득, 중위가격).
*   값 개수가 **짝수**일 경우: 가운데 두 값의 평균.
    *   10, 20, 30, 40 → 중간값 (20+30)/2 = 25

## 평균 vs. 중간값

*   **소득 분포:** 보통 고소득 극단값 때문에 `평균 소득 > 중위 소득`. 평균만 보면 소득 수준 과대평가 가능.
*   **중간값의 함정:** 만약 여러 고객 중 1명만 구매 시, `1인당 중위 매출 = 0원`. 이는 전체 매출 파악 어렵게 함.
*   **결론:** 평균과 중간값은 보여주는 측면 다름. **둘 다 함께 보는 것이 바람직**.

## 중심 경향치: 최빈값 (Mode)

*   가장 **자주 관찰된(빈도가 높은)** 값.
*   영어 `mode`: 상태, 유행, 가장 많은 것 등의 뜻.
*   **활용:** 연속 변수보다 **범주형 변수**에 유용 (예: 직원 중 김씨가 30%로 가장 많음).
*   **연속 변수 경우:** 보통 **구간 나누어** 최빈값 구함 (예: 고객 중 30대가 25%로 가장 많음).
    *   주의: 구간 나누는 방법에 따라 최빈값 달라질 수 있음.

## Python 중심경향치 계산

*   `df.price`: df 데이터프레임의 'price' 컬럼(열) 선택.
*   **평균:**
    ```python
    df.price.mean()
    ```
*   **중간값:**
    ```python
    df.price.median()
    ```
*   **최빈값:**
    ```python
    df.model.mode() # 범주형 변수 'model'의 최빈값
    ```
*   **범주별 빈도:**
    ```python
    df.model.value_counts() # 'model'별 데이터 개수
    ```

## 위치 측정치: 분위수 (Quantile)

*   데이터 크기 순 정렬 시, 전체 데이터를 특정 비율로 나누는 위치의 값.
*   **예:** 중간값 = 0.5 분위수 (50% 지점).
*   사분위수, 백분위수 등이 있음.

## 위치 측정치: 사분위수 (Quartile)

*   데이터를 **4등분**하는 위치 값.
*   **제1사분위수 (Q1):** 하위 25% 지점 (0.25 분위수).
*   **제2사분위수 (Q2):** 50% 지점 (0.5 분위수) = **중간값**.
*   **제3사분위수 (Q3):** 상위 25% 지점 (0.75 분위수).
*   (영어 철자 주의: quantile vs. quartile)

## 위치 측정치: 백분위수 (Percentile)

*   데이터에서 순위를 **백분율(%)**로 표현.
*   최소값 = 0 퍼센타일.
*   제1사분위수 (Q1) = 25 퍼센타일.
*   제2사분위수 (Q2) = 중간값 = 50 퍼센타일.
*   제3사분위수 (Q3) = 75 퍼센타일.
*   최대값 = 100 퍼센타일.

## Python 최소, 최대, 퍼센타일 계산

*   **최소값:**
    ```python
    df.price.min()
    ```
*   **최대값:**
    ```python
    df.price.max()
    ```
*   **25 퍼센타일 (제1사분위수):**
    ```python
    df.price.quantile(0.25) # 인자로 비율(0~1) 입력
    ```

## 변산성: 범위 (Range)

*   **최대값 - 최소값**.
*   **단점:** 극단값 있으면 매우 커짐. 데이터 중간 부분 퍼짐 정도 반영 못 함.
    *   10, 20, 30, 40, 50 → 범위 50 - 10 = 40
    *   10, 20, 30, 40, 500 → 범위 500 - 10 = 490

## 변산성: 사분위간 범위 (InterQuartile Range, IQR)

*   **제3사분위수 (Q3) - 제1사분위수 (Q1)**.
*   데이터의 **중앙 50%**가 퍼져 있는 범위.
*   **장점:** 최소/최대값 근처 극단값 영향 적음.

## 상자 수염 그림 (Box-Whisker Plot / Box Plot)

*   데이터 분포 시각화 방법. 5가지 요약 수치 표현.
*   **상자(Box):** 제1사분위수(Q1) ~ 제3사분위수(Q3) 범위. IQR 나타냄.
*   **상자 내 굵은 선:** 중간값(Median, Q2).
*   **수염(Whisker):** 상자 밖 선. 보통 최소값, 최대값까지 뻗음.
    *   **수염 최대 길이:** 일반적으로 IQR의 1.5배까지. 이 범위를 벗어나는 값은 **이상치(outlier)**로 간주, 점으로 표시.

![Box Plot Diagram](https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Boxplot_vs_PDF.svg/300px-Boxplot_vs_PDF.svg.png)
(이미지 출처: 위키미디어 커먼즈)

## Python 상자 수염 그림 그리기

```python
import seaborn as sns # 시각화 라이브러리 seaborn 임포트

# price 변수 하나에 대한 box plot
sns.boxplot(x='price', data=df)

# model 그룹별 price box plot 비교
sns.boxplot(x='price', y='model', data=df)
```

## 변산성: 편차 (Deviation)

*   **개별 값 - 평균**.
*   **예:** 데이터 30, 40, 50 (평균 40)
    *   편차: -10, 0, +10

## 변산성: 분산 (Variance)

*   **편차 제곱의 평균**.
*   데이터가 평균으로부터 얼마나 퍼져 있는지 나타냄.
*   **특징:**
    *   직관적 이해는 어려우나, 수학적으로 중요 성질 많음.
    *   편차 제곱으로 계산되어 원래 데이터 단위와 달라짐. 크기도 커짐.
    *   분산에 제곱근 취한 **표준편차**를 더 많이 사용.

## 변산성: 표준편차 (Standard Deviation)

*   **분산의 양의 제곱근 (√분산)**.
*   데이터가 평균 중심 얼마나 퍼져 있는지 나타냄.
*   **특징:**
    *   분산보다 직관적 해석 용이 (원래 데이터 단위와 동일).

## Python 분산, 표준편차 및 기술통계 요약 계산

*   **분산:**
    ```python
    df.price.var()
    ```
*   **표준편차:**
    ```python
    df.price.std()
    ```
*   **기술통계 한 번에 구하기:** (개수, 평균, 표준편차, 최소값, 사분위수, 최대값 등)
    ```python
    df.price.describe()
    ```

## 히스토그램 (Histogram)

*   연속형 데이터 분포 시각화 방법.
*   데이터를 여러 **구간(bin)**으로 나누고, 각 구간에 속하는 데이터 **사례 수(빈도)**를 막대그래프로 그린 것.

## Python 히스토그램 그리기

```python
import seaborn as sns
import matplotlib.pyplot as plt # 세부 설정 위한 라이브러리

# 기본적인 히스토그램
sns.histplot(x='price', data=df)

# 막대(bin) 개수 조절
sns.histplot(x='price', data=df, bins=30) # 막대 30개로

# 막대 구간 직접 지정 및 x축 눈금 설정
xs = list(range(100, 2100, 200)) # 100부터 2100까지 200 간격 리스트
sns.histplot(x='price', data=df, bins=xs)
plt.xticks(xs) # x축 눈금을 xs 리스트 값으로 설정
plt.show() # 그래프 보여주기 (환경에 따라 필요)
```

## 커널 밀도 추정 (Kernel Density Estimation, KDE)

*   데이터 **밀도(분포 형태)** 를 부드러운 곡선으로 추정하는 기법.
*   히스토그램보다 데이터 분포 모양 파악 용이할 수 있음.
*   **Python 히스토그램에 KDE 곡선 추가:**
    ```python
    sns.histplot(x='price', data=df, kde=True) # kde=True 옵션 추가
    ```

## 표준화 (Standardization / Z-score)

*   데이터 변환 기법 중 하나. Z-점수 계산.
*   **계산:** (원래 값 - 평균) / 표준편차
    `Z = (X - μ) / σ`
*   **특징:**
    *   표준화된 데이터는 **평균 = 0, 표준편차 = 1** 이 됨.
    *   서로 단위나 범위 다른 변수들 비교 용이하게 함.
*   **Python 표준화 계산:**
    ```python
    평균 = df['mileage'].mean()
    표준편차 = df['mileage'].std()
    df['Z_mileage'] = (df['mileage'] - 평균) / 표준편차
    ```

## 이상치 찾기 (Outlier Detection)

*   다른 값들과 동떨어진 극단적인 값 찾기.
*   **방법 1: Z-점수 활용:**
    *   일반적으로 |Z-점수| > 3 (또는 2) 인 경우 이상치로 간주.
    ```python
    # Z_mileage 절대값이 3보다 큰 행 찾기
    df[df['Z_mileage'].abs() > 3]
    ```
*   **방법 2: IQR 활용:**
    *   Q1 - 1.5 * IQR 보다 작거나, Q3 + 1.5 * IQR 보다 큰 경우 이상치로 간주.
    ```python
    Q1 = df['mileage'].quantile(0.25)
    Q3 = df['mileage'].quantile(0.75)
    IQR = Q3 - Q1
    lower_bound = Q1 - 1.5 * IQR
    upper_bound = Q3 + 1.5 * IQR

    # lower_bound 보다 작거나 upper_bound 보다 큰 행 찾기
    df[(df['mileage'] < lower_bound) | (df['mileage'] > upper_bound)]
    ```

## 퀴즈

<iframe src="https://tally.so/embed/w7Ey1R?alignLeft=1&hideTitle=1&transparentBackground=1&dynamicHeight=1" loading="lazy" width="100%" height="2386" frameborder="0" marginheight="0" marginwidth="0" title="[통계] 기술 통계"></iframe>
