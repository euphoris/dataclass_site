# 문턱값

## ROC 곡선 Receiver Operating Characteristic 

  * 수신자 특성 곡선: 신호 이론에서 유래한 이름 
    감도를 높이면 노이즈도 같이 올라가는 상황에서 최적의 감도를 결정하는 문제 
  * 가로축은 FPR(=1-특이도), 세로축은 TPR(=재현도) 
  * 문턱값을 변화시키면서 특이도와 재현도의 변화를 곡선으로 표시 
  * 곡선하 면적(Area Under the Curve): ROC 곡선 아래의 면적 
  * 완벽하게 반대로 예측하면 0\~ 무작위로 예측할 경우 0.5 \~ 완벽하게 예측하면 1 




## Python ROC 곡선 

  * 임포트 
    ```python
    from sklearn.metrics import roc_auc_score, roc_curve
    import matplotlib.pyplot as plt
    ```
    
  * 시각화 
    ```python
    fpr, tpr, threshold = roc_curve(y_test, prob)
    plt.plot(fpr, tpr)
    ```
    
  * AUC 
    ```python
    roc_auc_score(y_test, prob)
    ```

## 퀴즈

```python
hi = pd.read_excel('hiring.xlsx')  # 데이터 불러오기
hi['y'] = hi.hire.map({'P': 1, 'F': 0}) # P는 1, F는 0으로 변환
m = logit('y ~ gpa + test + major', hi).fit() # 분석

y_test = hi.y  # 실제 값
prob = m.predict(hi)  # 확률 예측
y_pred = np.where(prob > 0.5, 1, 0)  # 문턱값보다 크면 1, 아니면 0으로 예측
```

import { QuizComponent } from "@/components/QuizComponent";

<QuizComponent quizId="roc-auc" quizItems={
[
    {
        "item_type": "radio",
        "question": "문턱값을 올리면 정밀도는 어떻게 됩니까?",
        "options": [
            "올라간다",
            "그대로",
            "내려간다"
        ],
        "hint": "문턱값을 올리면 양성 예측이 보수적으로 바뀝니다.",
        "solution": "올라간다"
    },
    {
        "item_type": "radio",
        "question": "문턱값을 올리면 재현도는 어떻게 됩니까?",
        "options": [
            "올라간다",
            "그대로",
            "내려간다"
        ],
        "hint": "문턱값을 올리면 양성 예측이 보수적으로 바뀝니다.",
        "solution": "내려간다"
    },
    {
        "item_type": "radio",
        "question": "AUC가 높을 수록 ROC 곡선은 어떤 모양을 띕니까?",
        "options": [
            "대각선 직선에 가까운 모양",
            "왼쪽 위로 볼록한 모양",
            "오른쪽 위로 볼록한 모양",
            "왼쪽 아래로 오목한 모양",
            "오른쪽 아래로 오목한 모양"
        ],
        "hint": "ROC 곡선은 TPR과 FPR의 관계를 나타냅니다. TPR은 높을 수록, FPR은 낮을 수록 좋습니다.",
        "solution": "왼쪽 위로 볼록한 모양",
    },
    {
        "item_type": "radio",
        "question": "ROC 곡선에 대한 설명으로 잘못된 것은?",
        "options": [
            "문턱값에 따른 TPR과 FPR의 변화를 나타낸다",
            "TPR이 늘어날 때, FPR이 얼마나 줄어드는지 또는 그 역을 나타낸다",
            "AUC가 클 수록 바람직하다",
            "AUC의 범위는 0~무한대(∞)이다"
        ],
        "hint": "AUC의 범위는 0~1입니다.",
        "solution": "AUC의 범위는 0~무한대(∞)이다"
    },
    {
        "item_type": "number",
        "question": "hiring.xlsx로 로지스틱 회귀분석을 하고 ROC 곡선을 그려보세요. 곡선하면적(AUC)은? (소수점 둘째자리까지)",
        "tolerance": 0.01,
        "hint": "```\nfrom sklearn.metrics import roc_auc_score, roc_curve\nimport matplotlib.pyplot as plt\nfpr, tpr, threshold = roc_curve(y_test, prob)\nplt.plot(fpr, tpr)\nroc_auc_score(y_test, prob)\n```",
        "solution": 0.8272901488691784
    },
]
} />