
# 원하는 데이터만 필터링

## Python의 비교 연산자
* `>` (크다)
* `<` (작다)
* `>=` (크거나 같다)
* `<=` (작거나 같다)
* `==` (같다)
* `!=` (다르다)
* 예시: `3 > 4`
* 비교의 결과는 `True` (참), `False` (거짓)
    * 이러한 참/거짓 값은 불리언(Boolean)이라고 함
    * 첫 글자 T와 F가 대문자임에 주의

## 논리 연산자
* `and`: 두 조건 모두 True일 때 True
```python
(5 > 3) and (2 == 2)
```
* `or`: 두 조건 중 하나만 True여도 True
```python
(5 < 3) or (2 != 2)
```
* `not`: 결과를 뒤집음 (거짓 -> 참, 참 -> 거짓)
```python
not (5 < 3)
```

## 리스트
* 여러 개의 값을 콤마(,)로 구분해 `[ ]` (대괄호)로 묶은 것
* 순서가 있는 값의 모음
```python
my_list = ['서울', '부산', '광주']
ages = [20, 22, 25]
```
* `in` 연산자: 포함 여부 확인- 어떤 값이 List에 포함되어 있는지 확인
```python
'서울' in ['서울', '부산', '광주']
'대구' in ['서울', '부산', '광주']
```

## query() 메소드
* `df.query('조건 문자열')`: 문자열 형태로 조건식을 작성하여 데이터 필터링
* 장점: SQL과 유사한 간결한 문법, 변수 참조 용이 (@변수명)
```python
df.query('my_car_damage > 0') # my_car_damage가 0보다 큰 경우

df.query('model == "Avante" and my_car_damage > 0')
# 차종이 Avante이고 my_car_damage가 0보다 큰 경우

df.query('my_car_damage == 0 or other_car_damage == 0')
# my_car_damage가 0이거나 other_car_damage가 0인 경우

df.query('not (my_car_damage == 0)')
# my_car_damage가 0이 아닌 경우
```

## 변수 사용
* @변수명을 사용하여 외부 변수를 쿼리 내에서 참조
```python
last_year = df.year.max()
df.query('year == @last_year') # last_year 변수에 저장된 값과 year 열이 같은 행을 선택
```

## 문자열 내용으로 필터링
* `.str.contains('text')`: 'text'를 포함하는지
* `.str.startswith('text')`: 'text'로 시작하는지
* `.str.endswith('text')`: 'text'로 끝나는지
* 예시:
```python
df.query('model.str.contains("va")') # va를 포함
df.query('model.str.startswith("A")') # A로 시작
df.query('model.str.endswith("e")') # e로 끝남
```

## 퀴즈

import { QuizComponent } from "@/components/QuizComponent";

<QuizComponent quizId="query" quizItems={
[
    {
        "item_type": "radio",
        "question": "Python에서 두 값이 '같다'를 비교할 때 사용하는 연산자는 무엇입니까?",
        "options": [
            "=",
            "==",
            "!=",
            ":="
        ],
        "hint": "하나의 등호(=)는 값을 할당하는 데 사용되므로, 비교를 위해서는 다른 기호를 사용합니다.",
        "solution": "=="
    },
    {
        "item_type": "checkbox",
        "question": "Python에서 참 또는 거짓을 나타내는 불리언(Boolean) 값으로 올바른 것을 모두 고르세요.",
        "options": [
            "True",
            "False",
            "true",
            "false"
        ],
        "hint": "Python의 불리언 값은 첫 글자를 대문자로 표기해야 합니다.",
        "solution": [
            "True",
            "False"
        ]
    },
    {
        "item_type": "radio",
        "question": "두 개의 조건 중 하나만 참(True)이어도 전체 결과가 참(True)이 되는 논리 연산자는 무엇입니까?",
        "options": [
            "and",
            "or",
            "not",
            "in"
        ],
        "hint": "'또는'을 의미하는 영어 단어입니다.",
        "solution": "or"
    },
    {
        "item_type": "radio",
        "question": "다음 코드의 실행 결과로 올바른 것은 무엇입니까?\n`'대구' in ['서울', '부산', '광주']`",
        "options": [
            "True",
            "False",
            "Error",
            "None"
        ],
        "hint": "`in` 연산자는 특정 값이 리스트 안에 포함되어 있는지 확인하여 True 또는 False를 반환합니다.",
        "solution": "False"
    },
    {
        "item_type": "radio",
        "question": "pandas DataFrame `df`에서 `my_car_damage` 열의 값이 0보다 큰 행만 필터링하는 올바른 코드는 무엇입니까?",
        "options": [
            "df.filter('my_car_damage > 0')",
            "df.query('my_car_damage > 0')",
            "df.select('my_car_damage > 0')",
            "df('my_car_damage > 0')"
        ],
        "hint": "교안에서 배운, SQL과 유사하게 문자열 형태로 조건을 작성하여 필터링하는 메소드입니다.",
        "solution": "df.query('my_car_damage > 0')"
    },
    {
        "item_type": "radio",
        "question": "pandas의 `query()` 메소드 안에서 외부 변수(예: last_year)를 사용하기 위해 변수명 앞에 붙여야 하는 기호는 무엇입니까?",
        "options": [
            "#",
            "$",
            "@",
            "&"
        ],
        "hint": "이메일 주소에서 사용자 아이디와 도메인을 구분할 때 사용하는 기호입니다.",
        "solution": "@"
    },
    {
        "item_type": "radio",
        "question": "DataFrame `df`의 `model` 열에서 문자열 'A'로 시작하는 모든 행을 찾기 위한 코드로 올바른 것은 무엇입니까?",
        "options": [
            "df.query('model.str.contains(\"A\")')",
            "df.query('model.str.startswith(\"A\")')",
            "df.query('model.str.endswith(\"A\")')",
            "df.query('model.str.like(\"A%\")')"
        ],
        "hint": "'~로 시작하다'라는 의미의 영어 단어를 사용하는 문자열 메소드입니다.",
        "solution": "df.query('model.str.startswith(\"A\")')"
    },
    {
        "item_type": "radio",
        "question": "다음 중 `df.query()`를 사용하여 'model'이 'Avante'이거나 'year'가 2020인 데이터를 필터링하는 올바른 코드는 무엇입니까?",
        "options": [
            "df.query('model == \"Avante\" and year == 2020')",
            "df.query('model == \"Avante\" or year == 2020')",
            "df.query('model is \"Avante\" || year is 2020')",
            "df.query('model = \"Avante\" | year = 2020')"
        ],
        "hint": "'이거나' 라는 조건은 'or' 논리 연산자를 사용하며, 문자열 비교는 `==` 기호를 사용합니다.",
        "solution": "df.query('model == \"Avante\" or year == 2020')"
    }
]
} />


## Q&A
<iframe src="https://tally.so/embed/wbOOKg?alignLeft=1&hideTitle=1&transparentBackground=1&dynamicHeight=0" loading="lazy" width="100%" height="274" frameborder="0" marginheight="0" marginwidth="0" title="Q&A"></iframe>